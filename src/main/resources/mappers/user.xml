<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.parker.user.dao.UserDAO">
	<!--회원가입 -->
	<insert id="userinsert" parameterType="com.parker.user.vo.UserVO">
		<selectKey keyProperty="user_number" resultType="int" order="BEFORE">
			select seq_user_tb.nextval from dual
		</selectKey>
		insert into users_tb(
		user_number,
		user_name,
		user_id,
		user_password,
		user_email,
		zip_code,
		user_address,
		detail_address,
		user_birthday,
		user_cell,
		user_phone,
		user_gender,
		user_privacyconsignment,
		user_termsofuse,
		user_receiveadvertising,
		user_regdate
		)
		values(
		#{user_number},
		#{user_name},
		#{user_id},
		#{user_password},
		#{user_email},
		#{zip_code},
		#{user_address},
		#{detail_address},
		to_date(#{user_birthday},'YYYYMMDD'),
		#{user_cell},
		#{user_phone},
		#{user_gender},
		#{user_privacyconsignment},
		#{user_termsofuse},
		#{user_receiveadvertising},
		sysdate
		)
	</insert>
	<!--회원가입 아이디 중복검사 -->
	<select id="useridcheck" parameterType="com.parker.user.vo.UserVO"
		resultType="int">
		<!-- select count(*) from users_tb where user_id = #{user_id} -->

		select count(*)
		from users_tb
		where user_id = #{user_id}
		<if test='user_id !=null and user_id != ""'>
		</if>
	</select>

	<select id="useridcheck1" parameterType="com.parker.user.vo.UserVO"
		resultType="com.parker.user.vo.UserVO">
		<!-- select count(*) from users_tb where user_id = #{user_id} -->

		select count(*)
		from users_tb
		where user_id = #{user_id}
		<if test='user_id !=null and user_id != ""'>
		</if>
	</select>



	<!--로그인 -->
	<select id="selectLogin" parameterType="com.parker.user.vo.UserVO"
		resultType="com.parker.user.vo.UserVO">
		SELECT
		user_id, user_name, user_number
		FROM
		USERS_TB
		where
		user_id = #{user_id} and user_password = #{user_password}
	</select>

	<select id="selectLoginUser" parameterType="com.parker.user.vo.UserVO"
		resultType="com.parker.user.vo.UserVO">
		SELECT
		user_id, user_name, user_number,user_password
		FROM
		USERS_TB
		where
		user_id = #{user_id}
		and user_password = #{user_password}

	</select>
</mapper>
